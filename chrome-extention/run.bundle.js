(()=>{"use strict";var e,t,n={936:(e,t,n)=>{n.d(t,{n:()=>s});const s={controlCcButton:"#ow3 > div.T4LgNb > div > div:nth-child(13) > div.crqnQb > div.UnvNgf.Sdwpn.P9KVBf.IYIJAc.BIBiNe > div.Tmb7Fd > div > div.juFBl",ccMainArea:".a4cQT",ccArea:"#ow3 > div.T4LgNb > div > div:nth-child(13) > div.crqnQb > div.a4cQT > div:nth-child(1) > div:nth-child(1)",usersArea:"#ow3 > div.T4LgNb > div > div:nth-child(13) > div.crqnQb > div:nth-child(2) > div.axUSnc.P9KVBf"}},280:(e,t,n)=>{n.d(t,{D:()=>h});var s=n(936);const l=(e,t)=>{var n=t/1e3;e.style.transition="opacity "+n+"s ease",e.style.opacity="0",setTimeout((function(){var t;null===(t=e.parentNode)||void 0===t||t.removeChild(e)}),t)},i="user-cc-class-name";class r{constructor(){this.displayUserCcList=[],this.cclimitSecond=10,this.intervalId=0}getElement(){return document.querySelector(s.n.usersArea)}findUserAreaElement(e){const t=this.getElement();if(t)return Array.from(t.children).find((t=>{var n;const s=t.querySelector("[data-self-name]");return!!s&&!!(null===(n=s.textContent)||void 0===n?void 0:n.startsWith(e))}))}findUserVideoElement(e){const t=this.findUserAreaElement(e);if(!t)return;const n=t.querySelectorAll("video");let s=null;return n.length>=2?n.forEach((e=>{"none"!=e.style.display&&(s=e)})):s=n[0],null!==s?s:void 0}findUserCcElement(e){const t=this.findUserAreaElement(e);if(!t)return;const n=t.querySelector("."+i);return null!==n?n:void 0}appendUserCcElement(e,t){var n;if(!this.findUserAreaElement(e))return;const s=this.findUserVideoElement(e);if(!s)return;const l=document.createElement("div");l.style.color="white",l.style.position="absolute",l.style.bottom="0",l.style.width="100%",l.style.backgroundColor="rgba(0,0,0,0.25)",l.style.margin="0",l.style.zIndex="1000000",l.textContent=t,l.className=i,l.style.opacity="0.5",l.style.fontWeight="700",l.style.textAlign="center",l.style.pointerEvents="none";const r=Math.floor(s.clientWidth/35);l.style.fontSize=r<18?"15px":`${r}px`,l.style.webkitTextStroke=r<27?"1px #000":"2px #000",null===(n=s.parentElement)||void 0===n||n.after(l);const o=this.findUserCcElement(e);o&&this.appendDisplayUserCc(e,o)}updateUserCcElement(e,t){if(!this.findUserAreaElement(e))return;const n=this.findUserVideoElement(e);if(!n)return;const s=this.findUserCcElement(e);if(!s)return;s.textContent=t;const l=Math.floor(n.clientWidth/35);s.style.fontSize=l<18?"15px":`${l}px`,s.style.webkitTextStroke=l<27?"1px #000":"2px #000",this.appendDisplayUserCc(e,s)}deleteUserCcElement(e){const t=this.displayUserCcList.find((t=>t.name===e));t&&l(t.element,2e3)}deleteUserCcElements(){this.displayUserCcList.forEach((e=>{l(e.element,2e3)}))}appendDisplayUserCc(e,t){this.displayUserCcList=this.displayUserCcList.filter((t=>t.name!==e)),this.displayUserCcList.push({name:e,time:(new Date).getTime(),element:t})}runInterval(){this.intervalId=window.setInterval((()=>{this.displayUserCcList.filter((e=>((new Date).getTime()-e.time)/1e3>this.cclimitSecond)).forEach((e=>{l(e.element,2e3)})),this.displayUserCcList=this.displayUserCcList.filter((e=>((new Date).getTime()-e.time)/1e3<this.cclimitSecond))}),3e3)}stopInterval(){clearInterval(this.intervalId)}}class o{constructor(e){this.drawed=!1,this.mouseOver=!1,this.clicked=!1,this.callbackFuncMouseOver=()=>{this.mouseOver=!0,this.changeStyle()},this.callbackFuncMouseLeave=()=>{this.mouseOver=!1,this.changeStyle()},this.callbackFuncClick=()=>{this.clicked=!this.clicked,this.changeStyle(),this.clickCallback(this.clicked)},this.changeStyle=()=>{const e=this.getElement();null!==e&&(e.style.width="40px",e.style.height="40px",e.style.backgroundColor="rgb(60, 64, 67)",e.style.borderRadius="20px",e.style.paddingTop="12px",e.style.paddingBottom="12px",e.style.display="inline-block",e.style.boxSizing="border-box",e.style.filter="brightness(1)",e.innerText="ON",e.style.color="#FFF",this.mouseOver&&(e.style.filter="brightness(1.15)"),this.clicked&&(e.style.color="#000",e.innerText="OFF",e.style.backgroundColor="rgb(138,180,248)"))},this.clickCallback=e}createElement(){const e=document.createElement("div");e.id=o.ELEMENT_ID,e.addEventListener("mouseover",this.callbackFuncMouseOver),e.addEventListener("mouseleave",this.callbackFuncMouseLeave),e.addEventListener("click",this.callbackFuncClick);const t=document.querySelector(s.n.controlCcButton);null!==t&&null!=t.parentNode&&(t.parentNode.insertBefore(e,t.nextElementSibling),this.changeStyle(),this.drawed=!0)}deleteElement(){var e;null===(e=document.getElementById(o.ELEMENT_ID))||void 0===e||e.remove(),this.drawed=!1,this.mouseOver=!1,this.clicked=!1}getElement(){return document.getElementById(o.ELEMENT_ID)}}o.ELEMENT_ID="controlButton";class c{constructor(){this.opacate=!1}opacateElement(){const e=this.getElement();null!==e&&(e.style.opacity="0",this.opacate=!0)}showElement(){const e=this.getElement();null!==e&&(e.style.opacity="1",this.opacate=!1)}getElement(){return document.querySelector(s.n.ccMainArea)}getCcElement(){return document.querySelector(s.n.ccArea)}}const a={childList:!0,subtree:!0};class d{constructor(e){this.observer=null,this.callbackFuncObserver=e}run(){this.observer=new MutationObserver(((e,t)=>{var n,s,l,i;for(const t of e)if("childList"===t.type&&"SPAN"===t.target.nodeName){const e=null===(s=null===(n=t.target.parentNode)||void 0===n?void 0:n.parentNode)||void 0===s?void 0:s.parentNode;if(!e)return;const r=Array.from(e.children);if(3!==r.length)return;this.callbackFuncObserver(null!==(l=r[1].textContent)&&void 0!==l?l:"",r[0].src,null!==(i=r[2].textContent)&&void 0!==i?i:"")}}));const e=(new c).getCcElement();this.observer.observe(e,a)}stop(){var e;null===(e=this.observer)||void 0===e||e.disconnect()}}const h=()=>{console.log("start: application");const e=new r,t=new c;new o((s=>{console.log("click: controlButton"),s?(n.run(),console.log("start: observer"),e.runInterval(),console.log("run: interval"),t.opacateElement()):(n.stop(),console.log("stop: observer"),e.stopInterval(),console.log("stop: interval"),e.deleteUserCcElements(),console.log("delete: cc elements"),t.showElement())})).createElement();const n=new d(((t,n,s)=>{console.log("mutate: cc"),console.log(`name: ${t}`),console.log(`imagePath: ${n}`),console.log(`speach: ${s}`),e.findUserCcElement(t)?e.updateUserCcElement(t,s):e.appendUserCcElement(t,s)}))};document.addEventListener("runScript",(e=>{h()}))}},s={};function l(e){var t=s[e];if(void 0!==t)return t.exports;var i=s[e]={exports:{}};return n[e](i,i.exports,l),i.exports}l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e=l(936),t=l(280),window.addEventListener("load",(function(){const n=setInterval((function(){null!=document.querySelector(e.n.ccMainArea)&&(clearInterval(n),(0,t.D)())}),1e3)}),!1)})();